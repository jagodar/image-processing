<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Gallery</title>
		<link rel="stylesheet" href="galleryallinone.css">
		
	</head>
	<body>
		<script>
			function filesUpload() {
				var imagesInput = document.getElementById("imagesInput");
				var divImgs = document.getElementById("imgs");
				if ('files' in imagesInput) {
					if (imagesInput.files.length != 0) {
						for (var i = 0; i < imagesInput.files.length; i++) {
							var img = imagesInput.files[i];
							addImage(img, divImgs);
						}
					}
				}					
			}
			
			function addImage(img, divImgs) {
				var canvas = document.createElement("canvas");
				var context = canvas.getContext('2d');
				
				divImgs.appendChild(canvas);

				var reader = new FileReader();
				reader.onload = (function(context) { 
					return function(e) {
						var img = new Image();
						img.onload = function() {
							var maxHeigth = 150;
							if (img.height > maxHeigth) {
								img.width *= maxHeigth /img.height;
								img.height = maxHeigth;
							}
							canvas.width = img.width;
							canvas.height = img.height;
							context.drawImage(img,0,0,img.width, img.height);
							canvas.onclick = function() {
								window.open(img.src);
							}
						}
						img.src = e.target.result;
					}
				})(context);
				reader.readAsDataURL(img);
			}
		</script>
		<div class="upload">
			<span>Click or drop</span>
			<input type="file" id="imagesInput" accept="image/jpeg,image/png" multiple onchange="filesUpload()" >
		</div>
		<div id="imgs" ></div>
	</body>
</html>